/*!
 * js-data-structures
 * http://github.com/Tyriar/js-data-structures
 *
 * Copyright 2015 Daniel Imms
 * Released under the MIT license
 * http://github.com/Tyriar/js-data-structures/blob/master/LICENSE
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],function(){return a.SplayTree=b()}):"object"==typeof exports?module.exports=b():a.SplayTree=b()}(this,function(){"use strict";function a(a,b){var c=b.right;b.right=c.left,c.left&&(c.left.parent=b),c.parent=b.parent,b.parent?b===b.parent.left?b.parent.left=c:b.parent.right=c:a.root=c,c.left=b,b.parent=c}function b(a,b){var c=b.left;b.left=c.right,c.right&&(c.right.parent=b),c.parent=b.parent,b.parent?b===b.parent.left?b.parent.left=c:b.parent.right=c:a.root=c,c.right=b,b.parent=c}function c(a,b,d){return a.compare(b,d.key)<0?d.left?c(a,b,d.left):(d.left=new l(b,d),a.nodeCount++,!0):a.compare(b,d.key)>0?d.right?c(a,b,d.right):(d.right=new l(b,d),a.nodeCount++,!0):!1}function d(a,b,c){return b===c.key?c:a.compare(b,c.key)<0?c.left?d(a,b,c.left):void 0:a.compare(b,c.key)>0&&c.right?d(a,b,c.right):void 0}function e(a,b,c){return a.compare(b,c.key)<0?c.left?e(a,b,c.left):!1:a.compare(b,c.key)>0?c.right?e(a,b,c.right):!1:f(a,c)}function f(a,b){if(!b.left&&!b.right)return g(a,b),!0;if(b.left&&!b.right)return h(a,b),!0;if(b.right&&!b.left)return i(a,b),!0;var c=k(b.right,b),d=c.left?c.left:c.right,e=d.key;return f(a,d),b.key=e,!0}function g(a,b){b.parent?b.parent.removeChild(b):a.root=void 0,a.nodeCount--}function h(a,b){b.key=b.left.key,b.right=b.left.right,b.right&&(b.right.parent=b),b.left=b.left.left,b.left&&(b.left.parent=b),a.nodeCount--}function i(a,b){b.key=b.right.key,b.left=b.right.left,b.left&&(b.left.parent=b),b.right=b.right.right,b.right&&(b.right.parent=b),a.nodeCount--}function j(c,d){for(;d.parent;){var e=d.parent;if(e.parent){var f=e.parent;e.left===d&&f.left===e?(b(c,f),b(c,d.parent)):e.right===d&&f.right===e?(a(c,f),a(c,d.parent)):e.left===d&&f.right===e?(b(c,e),a(c,d.parent)):(a(c,e),b(c,d.parent))}else e.left===d?b(c,e):a(c,e)}}function k(a,b){return a.left?k(a.left,a):b}function l(a,b){this.key=a,this.parent=b,this.left=void 0,this.right=void 0}var m=function(a){this.root=void 0,this.nodeCount=0,a&&(this.compare=a)};return m.prototype.add=function(a){if(!this.root)return this.root=new l(a),this.nodeCount++,!0;var b=c(this,a,this.root);return this.contains(a),b},m.prototype.contains=function(a){if(!this.root)return!1;var b=d(this,a,this.root);return b&&j(this,b),!!b},m.prototype.findMaximum=function(){if(!this.root)return void 0;for(var a=this.root;;){if(!a.right)return a.key;a=a.right}},m.prototype.findMinimum=function(){if(!this.root)return void 0;for(var a=this.root;;){if(!a.left)return a.key;a=a.left}},m.prototype.isEmpty=function(){return!this.root},m.prototype.remove=function(a){return this.root?(this.contains(a),e(this,a,this.root)):!1},m.prototype.size=function(){return this.nodeCount},m.prototype.traversePreOrder=function(a){if(this.root){var b=[];b.push(this.root);do{var c=b.pop();a(c.key),c.right&&b.push(c.right),c.left&&b.push(c.left)}while(b.length)}},m.prototype.traverseInOrder=function(a){for(var b=[],c=this.root;b.length||c;)c?(b.push(c),c=c.left):(c=b.pop(),a(c.key),c=c.right)},m.prototype.traversePostOrder=function(a){for(var b,c=[],d=this.root;c.length||d;)if(d)c.push(d),d=d.left;else{var e=c[c.length-1];e.right&&b!==e.right?d=e.right:(c.pop(),a(e.key),b=e)}},m.prototype.compare=function(a,b){return a>b?1:b>a?-1:0},l.prototype.removeChild=function(a){this.left===a&&(this.left=void 0),this.right===a&&(this.right=void 0)},m});